<app-header
  [title]="'MOOD_LOG.TITLE' | translate"
  [showBack]="true"
  color="mymoodlogcolor"
></app-header>

<ion-content class="ion-padding">
  <ion-list>
    @for (item of moodItems; track item) {
      <ion-item>
        <ion-label>{{ item.name }}</ion-label>
        <ion-select
          [(ngModel)]="selections[item.id]"
          [placeholder]="'MOOD_LOG.SELECT_INTENSITY' | translate"
          >
          @for (i of [0,1,2,3,4,5,6,7,8,9,10]; track i) {
            <ion-select-option
              [value]="i"
              >
              {{ i }}
            </ion-select-option>
          }
        </ion-select>
      </ion-item>
    }
  </ion-list>

  <!-- Comment field -->
  <ion-item>
    <ion-label position="stacked">
      {{ 'MOOD_LOG.COMMENT_LABEL' | translate }}
    </ion-label>
    <ion-textarea
      [(ngModel)]="comment"
      [placeholder]="'MOOD_LOG.COMMENT_PLACEHOLDER' | translate"
      autoGrow="true"
    ></ion-textarea>
  </ion-item>

  <!-- Read‑only trigger that opens a date‑time picker modal -->
  <ion-item>
    <ion-label position="stacked" >
      {{ 'MOOD_LOG.DATE_TIME_LABEL' | translate }}
    </ion-label>

    <!-- This renders a button showing the time -->
    <ion-datetime-button
      datetime="moodLogDatetimePicker"
      display-format="HH:mm"
      style="padding-top: 10px; padding-bottom: 10px;"
      >
    </ion-datetime-button>

    <!-- The datetime picker itself in a modal -->
    <ion-modal keepContentsMounted="true">
      <ng-template>
        <ion-datetime
          id="moodLogDatetimePicker"
          [(ngModel)]="logDateTime"
          presentation="date-time"
          [max]="maxDateIso"
          hourCycle="h23"
          locale="en-GB"
        ></ion-datetime>
      </ng-template>
    </ion-modal>
  </ion-item>
</ion-content>

<ion-footer class="ion-no-border">
  <ion-toolbar>
    <app-button
      size="wide"
      color="green"
      icon="save"
      [label]="'MOOD_LOG.SAVE_BUTTON' | translate"
      (clicked)="save()"
      class="footer-button"
    ></app-button>
  </ion-toolbar>
</ion-footer>